var gulp=require("gulp"),plugins=require("gulp-load-plugins")(),ts=require("gulp-typescript"),htmlmin=require("gulp-htmlmin");gulp.task("clean",function(){return gulp.src("./dst/*").pipe(plugins.clean())}),gulp.task("css",["clean"],function(){var l=gulp.src(["public/**/*.css","!public/**/*.min.css"]).pipe(plugins.minifyCss({compatibility:"ie8"})).pipe(gulp.dest("./dst/"));return l}),gulp.task("js",["clean"],function(){var l=gulp.src(["public/**/*.js","!public/**/*.min.js"]).pipe(ts({target:"es6",allowJs:!0,module:"commonjs",moduleResolution:"node"})).pipe(plugins.uglify()).pipe(gulp.dest("./dst/"));return l}),gulp.task("html",["clean"],function(){var l=gulp.src("public/**/*.html").pipe(htmlmin({collapseWhitespace:!0})).pipe(gulp.dest("./dst/"));return l}),gulp.task("mv",["html","css","js"],function(){var l=gulp.src("./dst/*").pipe(plugins.shell(["cp -rf ./dst/* ./public/"]));return l}),gulp.task("watch",function(){gulp.watch("public/*",["optimise"])}),gulp.task("default",["mv"],function(){console.log("gulp task ok!")});