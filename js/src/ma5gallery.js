function enterFullScreen(e){document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function exitFullScreen(e){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),ma5exit(e)}function ma5showActive(e,a){$(".ma5-imgbox").addClass("ma5-previous"),$(".ma5-prev").removeClass("ma5-hide"),$(".ma5-next").removeClass("ma5-hide"),$(".ma5-imgbox .ma5-html-content-center").removeClass("ready-to-play"),$(".ma5-tmp .ma5-active").prev().length||$(".ma5-prev").addClass("ma5-hide"),$(".ma5-tmp .ma5-active").next().length||$(".ma5-next").addClass("ma5-hide"),setTimeout(function(){$(".ma5-imgbox.ma5-previous").remove(),$("html").removeClass("ma5-in")},500);var t="";t=$(".ma5-active").hasClass("ma5-html")?$(".ma5-active .ma5-html-content").clone().addClass("ma5-clone"):"undefined"!=typeof $(".ma5-active img").data("ma5pathtofull")?$(".ma5-active img").clone().attr("src",$(".ma5-active img").data("ma5pathtofull")).addClass("ma5-clone"):$(".ma5-active img").clone().attr("src",$(".ma5-active img").attr("src").replace(/\-thumbnail./,".")).addClass("ma5-clone"),$("html").addClass("ma5-in"),$("body").append('<div class="ma5-imgbox noSwipe"></div>'),ma5showFigcaption(),ma5toggleFigcaption(),ma5hideFigcaption(),$(t).appendTo($(".ma5-imgbox").last()),$(".ma5-close").on("touch click",function(){exitFullScreen(e)}),$(".ma5-imgbox .ma5-html-content-center").on("click touch",function(){$(this).addClass("ready-to-play")}),a===!0&&enterFullScreen(e)}function ma5exit(e){$(e).removeClass("ma5-active"),$(".ma5-imgbox").addClass("ma5-out"),$(".ma5-tmp").addClass("ma5-out"),$(".ma5-prev, .ma5-next").remove(),$(".ma5-figcaption").addClass("ma5-out"),$("html").addClass("ma5-closing"),setTimeout(function(){$(".ma5-tmp").remove(),$(".ma5-imgbox").remove(),$("html").removeClass("ma5-gallery-active ma5-lightbox-active ma5-loaded ma5-closing"),$(".ma5-figcaption").remove(),$(".ma5-close").remove(),$(".ma5-backdrop").remove(),$(".ma5-toggle-control").remove(),$(".ma5-toggle-figcaption").remove(),$(document).scrollTop(localStorage.getItem("position"))},400)}function ma5goPrev(e){$(".ma5-tmp .ma5-active").prev().length&&($(".ma5-tmp .ma5-active").removeClass("ma5-active").prev().addClass("ma5-active"),ma5showActive(e))}function ma5goNext(e){$(".ma5-tmp .ma5-active").next().length&&($(".ma5-tmp .ma5-active").removeClass("ma5-active").next().addClass("ma5-active"),ma5showActive(e))}function ma5showFigcaption(){$(".ma5-active").has("figcaption").length?($(".ma5-toggle-figcaption").remove(),$("body").append('<span class="ma5-toggle-figcaption noSwipe"><span class="ma5-gallery-icon-info"></span></span>'),$(".ma5-figcaption").removeClass("ma5-figcaption").addClass("ma5-figcaption-old"),$("body").append('<div class="ma5-figcaption noSwipe"><div class="ma5-centerbox"><span class="ma5-gallery-icon-info"></span></div></div>'),$(".ma5-imgbox").last().addClass("ma5-has-figcaption"),$(".ma5-active figcaption").contents().clone().appendTo($(".ma5-figcaption .ma5-centerbox"))):($(".ma5-figcaption").addClass("ma5-out"),setTimeout(function(){$(".ma5-figcaption").remove(),$(".ma5-toggle-figcaption").remove()},400))}function ma5toggleFigcaption(){$(".ma5-toggle-figcaption").on("touch click",function(){$(".ma5-figcaption").toggleClass("ma5-figcaption-visible")})}function ma5hideFigcaption(){setTimeout(function(){$(".ma5-figcaption-old").remove()},400)}$.fn.ma5preload=function(){$("body").append('<div class="ma5-preloadbox"></div>'),this.each(function(){"undefined"!=typeof $(this).data("ma5pathtofull")?$(this).clone().attr("src",$(this).data("ma5pathtofull")).appendTo(".ma5-preloadbox"):$(this).clone().attr("src",$(this).attr("src").replace(/\-thumbnail./,".")).appendTo(".ma5-preloadbox")})},$.fn.ma5gallery=function(e){function a(){return"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)}a()&&$("body").addClass("ie"),e.preload===!0&&$(this.selector+" img").ma5preload(),e.fullscreen===!0;var t=this.selector;$(t).addClass("ma5-lightbox");var n=".ma5-tmp "+this.selector;$(this).on("touch click",function(a){"undefined"!=typeof Storage&&localStorage.setItem("position",$(document).scrollTop()),$("body").append('<span class="ma5-close noSwipe"><span class="ma5-gallery-icon-close"></span></span><div class="ma5-backdrop"></div>'),$(".ma5-imgbox").hasClass("ma5-out")||$("html").hasClass("ma5-in")||(setTimeout(function(){$("html").addClass("ma5-loaded")},30),$(this).parent().hasClass("ma5-gallery")||$(this).parent().hasClass("ma5-bg")?($(this).addClass("ma5-active").parent().clone().appendTo($("body")).removeClass("ma5-gallery").addClass("ma5-tmp noSwipe"),$(".ma5-gallery .ma5-active").removeClass("ma5-active"),$("html").hasClass("ma5-gallery-active")||($("body").append('<div class="ma5-prev noSwipe"><span class="ma5-gallery-icon-left"></span></div><div class="ma5-next noSwipe"><span class="ma5-gallery-icon-right"></span></div><span class="ma5-toggle-control noSwipe"><span class="ma5-gallery-icon-dot"></span></span>'),$(".ma5-toggle-control").on("touch click",function(){$(".ma5-tmp").toggleClass("ma5-visible")}),$("html").addClass("ma5-gallery-active"),$(".ma5-tmp").find(t).wrapAll('<div class="ma5-bg" />'),setTimeout(function(){$(".ma5-tmp").addClass("ma5-control")},400),ma5showActive(t,e.fullscreen)),$(".ma5-tmp .ma5-active").prev().length||$(".ma5-prev").addClass("ma5-hide"),$(".ma5-tmp .ma5-active").next().length||$(".ma5-next").addClass("ma5-hide"),$(".ma5-prev").on("touch click",function(){$("html").hasClass("ma5-gallery-active")&&ma5goPrev(t)}),$(".ma5-next").on("touch click",function(){$("html").hasClass("ma5-gallery-active")&&ma5goNext(t)}),$(n).on("touch click",function(){$(this).hasClass("ma5-active")||$("html").hasClass("ma5-in")||($(n).removeClass("ma5-active"),$(this).addClass("ma5-active"),ma5showActive(t,e.fullscreen))})):($("html").addClass("ma5-lightbox-active"),$(this).addClass("ma5-active"),ma5showActive(t,e.fullscreen)))}),e.fullscreen===!0&&!function(){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},a="webkit moz o ms khtml".split(" ");if("undefined"!=typeof document.cancelFullScreen)e.supportsFullScreen=!0;else for(var t=0,n=a.length;t<n;t++)if(e.prefix=a[t],"ms"==e.prefix){if("undefined"!=typeof document.msExitFullscreen){e.supportsFullScreen=!0;break}}else if("undefined"!=typeof document[e.prefix+"CancelFullScreen"]){e.supportsFullScreen=!0;break}e.supportsFullScreen&&("ms"==e.prefix?e.fullScreenEventName="MSFullscreenChange":e.fullScreenEventName=e.prefix+"fullscreenchange",e.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},e.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},e.cancelFullScreen=function(e){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){e.supportsFullScreen&&e.requestFullScreen(this)})}),window.fullScreenApi=e}();var l=!1,c=!1;e.fullscreen===!0&&(c=function(){l=fullScreenApi.isFullScreen(),l||exitFullScreen(t)}),$("body").keydown(function(e){$("html").hasClass("ma5-gallery-active")&&(37==e.keyCode?ma5goPrev(t):39==e.keyCode&&ma5goNext(t),32==e.keyCode&&$(".ma5-control").toggleClass("ma5-visible")),27==e.keyCode&&exitFullScreen(t)}),e.fullscreen===!0&&(document.addEventListener("fullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("MSFullscreenChange",c,!1))};